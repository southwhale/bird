define("echarts/chart/k",["require","./base","../util/shape/Candle","../component/axis","../component/grid","../component/dataZoom","../config","../util/ecData","zrender/tool/util","../chart"],function(t){function e(t,e,n,a,o){i.call(this,t,e,n,a,o),this.refresh(a)}var i=t("./base"),n=t("../util/shape/Candle");t("../component/axis"),t("../component/grid"),t("../component/dataZoom");var a=t("../config"),o=t("../util/ecData"),s=t("zrender/tool/util");return e.prototype={type:a.CHART_TYPE_K,_buildShape:function(){var t=this.series;this.selectedMap={};for(var e,i={top:[],bottom:[]},n=0,o=t.length;o>n;n++)t[n].type===a.CHART_TYPE_K&&(t[n]=this.reformOption(t[n]),this.legendHoverLink=t[n].legendHoverLink||this.legendHoverLink,e=this.component.xAxis.getAxis(t[n].xAxisIndex),e.type===a.COMPONENT_TYPE_AXIS_CATEGORY&&i[e.getPosition()].push(n));for(var s in i)i[s].length>0&&this._buildSinglePosition(s,i[s]);this.addShapeList()},_buildSinglePosition:function(t,e){var i=this._mapData(e),n=i.locationMap,a=i.maxDataLength;if(0!==a&&0!==n.length){this._buildHorizontal(e,a,n);for(var o=0,s=e.length;s>o;o++)this.buildMark(e[o])}},_mapData:function(t){for(var e,i,n=this.series,a=this.component.legend,o=[],s=0,r=0,h=t.length;h>r;r++)e=n[t[r]],i=e.name,this.selectedMap[i]=a?a.isSelected(i):!0,this.selectedMap[i]&&o.push(t[r]),s=Math.max(s,e.data.length);return{locationMap:o,maxDataLength:s}},_buildHorizontal:function(t,e,i){for(var n,a,o,s,r,h,l,d,p,m,c=this.series,u={},g=0,y=i.length;y>g;g++){n=i[g],a=c[n],o=a.xAxisIndex||0,s=this.component.xAxis.getAxis(o),l=a.barWidth||Math.floor(s.getGap()/2),m=a.barMaxWidth,m&&l>m&&(l=m),r=a.yAxisIndex||0,h=this.component.yAxis.getAxis(r),u[n]=[];for(var V=0,f=e;f>V&&null!=s.getNameByIndex(V);V++)d=a.data[V],p=this.getDataFromOption(d,"-"),"-"!==p&&4==p.length&&u[n].push([s.getCoordByIndex(V),l,h.getCoord(p[0]),h.getCoord(p[1]),h.getCoord(p[2]),h.getCoord(p[3]),V,s.getNameByIndex(V)])}this._buildKLine(t,u)},_buildKLine:function(t,e){for(var i,n,o,s,r,h,l,d,p,m,c,u,g,y,V,f,U,_=this.series,b=0,x=t.length;x>b;b++)if(U=t[b],c=_[U],y=e[U],this._isLarge(y)&&(y=this._getLargePointList(y)),c.type===a.CHART_TYPE_K&&null!=y){u=c,i=this.query(u,"itemStyle.normal.lineStyle.width"),n=this.query(u,"itemStyle.normal.lineStyle.color"),o=this.query(u,"itemStyle.normal.lineStyle.color0"),s=this.query(u,"itemStyle.normal.color"),r=this.query(u,"itemStyle.normal.color0"),h=this.query(u,"itemStyle.emphasis.lineStyle.width"),l=this.query(u,"itemStyle.emphasis.lineStyle.color"),d=this.query(u,"itemStyle.emphasis.lineStyle.color0"),p=this.query(u,"itemStyle.emphasis.color"),m=this.query(u,"itemStyle.emphasis.color0");for(var k=0,v=y.length;v>k;k++)V=y[k],g=c.data[V[6]],u=g,f=V[3]<V[2],this.shapeList.push(this._getCandle(U,V[6],V[7],V[0],V[1],V[2],V[3],V[4],V[5],f?this.query(u,"itemStyle.normal.color")||s:this.query(u,"itemStyle.normal.color0")||r,this.query(u,"itemStyle.normal.lineStyle.width")||i,f?this.query(u,"itemStyle.normal.lineStyle.color")||n:this.query(u,"itemStyle.normal.lineStyle.color0")||o,f?this.query(u,"itemStyle.emphasis.color")||p||s:this.query(u,"itemStyle.emphasis.color0")||m||r,this.query(u,"itemStyle.emphasis.lineStyle.width")||h||i,f?this.query(u,"itemStyle.emphasis.lineStyle.color")||l||n:this.query(u,"itemStyle.emphasis.lineStyle.color0")||d||o))}},_isLarge:function(t){return t[0][1]<.5},_getLargePointList:function(t){for(var e=this.component.grid.getWidth(),i=t.length,n=[],a=0;e>a;a++)n[a]=t[Math.floor(i/e*a)];return n},_getCandle:function(t,e,i,a,s,r,h,l,d,p,m,c,u,g,y){var V=this.series,f={zlevel:this.getZlevelBase(),z:this.getZBase(),clickable:this.deepQuery([V[t].data[e],V[t]],"clickable"),style:{x:a,y:[r,h,l,d],width:s,color:p,strokeColor:c,lineWidth:m,brushType:"both"},highlightStyle:{color:u,strokeColor:y,lineWidth:g},_seriesIndex:t};return o.pack(f,V[t],t,V[t].data[e],e,i),f=new n(f)},getMarkCoord:function(t,e){var i=this.series[t],n=this.component.xAxis.getAxis(i.xAxisIndex),a=this.component.yAxis.getAxis(i.yAxisIndex);return["string"!=typeof e.xAxis&&n.getCoordByIndex?n.getCoordByIndex(e.xAxis||0):n.getCoord(e.xAxis||0),"string"!=typeof e.yAxis&&a.getCoordByIndex?a.getCoordByIndex(e.yAxis||0):a.getCoord(e.yAxis||0)]},refresh:function(t){t&&(this.option=t,this.series=t.series),this.backupShapeList(),this._buildShape()},addDataAnimation:function(t){for(var e=this.series,i={},n=0,a=t.length;a>n;n++)i[t[n][0]]=t[n];for(var s,r,h,l,d,p,n=0,a=this.shapeList.length;a>n;n++)if(d=this.shapeList[n]._seriesIndex,i[d]&&!i[d][3]&&"candle"===this.shapeList[n].type){if(p=o.get(this.shapeList[n],"dataIndex"),l=e[d],i[d][2]&&p===l.data.length-1){this.zr.delShape(this.shapeList[n].id);continue}if(!i[d][2]&&0===p){this.zr.delShape(this.shapeList[n].id);continue}r=this.component.xAxis.getAxis(l.xAxisIndex||0).getGap(),s=i[d][2]?r:-r,h=0,this.zr.animate(this.shapeList[n].id,"").when(this.query(this.option,"animationDurationUpdate"),{position:[s,h]}).start()}}},s.inherits(e,i),t("../chart").define("k",e),e}),define("echarts/component/axis",["require","./base","zrender/shape/Line","../config","../util/ecData","zrender/tool/util","zrender/tool/color","./categoryAxis","./valueAxis","../component"],function(t){function e(t,e,n,a,o,s){i.call(this,t,e,n,a,o),this.axisType=s,this._axisList=[],this.refresh(a)}var i=t("./base"),n=t("zrender/shape/Line"),a=t("../config"),o=t("../util/ecData"),s=t("zrender/tool/util"),r=t("zrender/tool/color");return e.prototype={type:a.COMPONENT_TYPE_AXIS,axisBase:{_buildAxisLine:function(){var t=this.option.axisLine.lineStyle.width,e=t/2,i={_axisShape:"axisLine",zlevel:this.getZlevelBase(),z:this.getZBase()+3,hoverable:!1};switch(this.option.position){case"left":i.style={xStart:this.grid.getX()-e,yStart:this.grid.getYend(),xEnd:this.grid.getX()-e,yEnd:this.grid.getY(),lineCap:"round"};break;case"right":i.style={xStart:this.grid.getXend()+e,yStart:this.grid.getYend(),xEnd:this.grid.getXend()+e,yEnd:this.grid.getY(),lineCap:"round"};break;case"bottom":i.style={xStart:this.grid.getX(),yStart:this.grid.getYend()+e,xEnd:this.grid.getXend(),yEnd:this.grid.getYend()+e,lineCap:"round"};break;case"top":i.style={xStart:this.grid.getX(),yStart:this.grid.getY()-e,xEnd:this.grid.getXend(),yEnd:this.grid.getY()-e,lineCap:"round"}}""!==this.option.name&&(i.style.text=this.option.name,i.style.textPosition=this.option.nameLocation,i.style.textFont=this.getFont(this.option.nameTextStyle),this.option.nameTextStyle.align&&(i.style.textAlign=this.option.nameTextStyle.align),this.option.nameTextStyle.baseline&&(i.style.textBaseline=this.option.nameTextStyle.baseline),this.option.nameTextStyle.color&&(i.style.textColor=this.option.nameTextStyle.color)),i.style.strokeColor=this.option.axisLine.lineStyle.color,i.style.lineWidth=t,this.isHorizontal()?i.style.yStart=i.style.yEnd=this.subPixelOptimize(i.style.yEnd,t):i.style.xStart=i.style.xEnd=this.subPixelOptimize(i.style.xEnd,t),i.style.lineType=this.option.axisLine.lineStyle.type,i=new n(i),this.shapeList.push(i)},_axisLabelClickable:function(t,e){return t?(o.pack(e,void 0,-1,void 0,-1,e.style.text),e.hoverable=!0,e.clickable=!0,e.highlightStyle={color:r.lift(e.style.color,1),brushType:"fill"},e):e},refixAxisShape:function(t,e){if(this.option.axisLine.onZero){var i;if(this.isHorizontal()&&null!=e)for(var n=0,a=this.shapeList.length;a>n;n++)"axisLine"===this.shapeList[n]._axisShape?(this.shapeList[n].style.yStart=this.shapeList[n].style.yEnd=this.subPixelOptimize(e,this.shapeList[n].stylelineWidth),this.zr.modShape(this.shapeList[n].id)):"axisTick"===this.shapeList[n]._axisShape&&(i=this.shapeList[n].style.yEnd-this.shapeList[n].style.yStart,this.shapeList[n].style.yStart=e-i,this.shapeList[n].style.yEnd=e,this.zr.modShape(this.shapeList[n].id));if(!this.isHorizontal()&&null!=t)for(var n=0,a=this.shapeList.length;a>n;n++)"axisLine"===this.shapeList[n]._axisShape?(this.shapeList[n].style.xStart=this.shapeList[n].style.xEnd=this.subPixelOptimize(t,this.shapeList[n].stylelineWidth),this.zr.modShape(this.shapeList[n].id)):"axisTick"===this.shapeList[n]._axisShape&&(i=this.shapeList[n].style.xEnd-this.shapeList[n].style.xStart,this.shapeList[n].style.xStart=t,this.shapeList[n].style.xEnd=t+i,this.zr.modShape(this.shapeList[n].id))}},getPosition:function(){return this.option.position},isHorizontal:function(){return"bottom"===this.option.position||"top"===this.option.position}},reformOption:function(t){if(!t||t instanceof Array&&0===t.length?t=[{type:a.COMPONENT_TYPE_AXIS_VALUE}]:t instanceof Array||(t=[t]),t.length>2&&(t=[t[0],t[1]]),"xAxis"===this.axisType){(!t[0].position||"bottom"!=t[0].position&&"top"!=t[0].position)&&(t[0].position="bottom"),t.length>1&&(t[1].position="bottom"===t[0].position?"top":"bottom");for(var e=0,i=t.length;i>e;e++)t[e].type=t[e].type||"category",t[e].xAxisIndex=e,t[e].yAxisIndex=-1}else{(!t[0].position||"left"!=t[0].position&&"right"!=t[0].position)&&(t[0].position="left"),t.length>1&&(t[1].position="left"===t[0].position?"right":"left");for(var e=0,i=t.length;i>e;e++)t[e].type=t[e].type||"value",t[e].xAxisIndex=-1,t[e].yAxisIndex=e}return t},refresh:function(e){var i;e&&(this.option=e,"xAxis"===this.axisType?(this.option.xAxis=this.reformOption(e.xAxis),i=this.option.xAxis):(this.option.yAxis=this.reformOption(e.yAxis),i=this.option.yAxis),this.series=e.series);for(var n=t("./categoryAxis"),a=t("./valueAxis"),o=Math.max(i&&i.length||0,this._axisList.length),s=0;o>s;s++)!this._axisList[s]||!e||i[s]&&this._axisList[s].type==i[s].type||(this._axisList[s].dispose&&this._axisList[s].dispose(),this._axisList[s]=!1),this._axisList[s]?this._axisList[s].refresh&&this._axisList[s].refresh(i?i[s]:!1,this.series):i&&i[s]&&(this._axisList[s]="category"===i[s].type?new n(this.ecTheme,this.messageCenter,this.zr,i[s],this.myChart,this.axisBase):new a(this.ecTheme,this.messageCenter,this.zr,i[s],this.myChart,this.axisBase,this.series))},getAxis:function(t){return this._axisList[t]},clear:function(){for(var t=0,e=this._axisList.length;e>t;t++)this._axisList[t].dispose&&this._axisList[t].dispose();this._axisList=[]}},s.inherits(e,i),t("../component").define("axis",e),e}),define("echarts/component/grid",["require","./base","zrender/shape/Rectangle","../config","zrender/tool/util","../component"],function(t){function e(t,e,n,a,o){i.call(this,t,e,n,a,o),this.refresh(a)}var i=t("./base"),n=t("zrender/shape/Rectangle"),a=t("../config"),o=t("zrender/tool/util");return e.prototype={type:a.COMPONENT_TYPE_GRID,getX:function(){return this._x},getY:function(){return this._y},getWidth:function(){return this._width},getHeight:function(){return this._height},getXend:function(){return this._x+this._width},getYend:function(){return this._y+this._height},getArea:function(){return{x:this._x,y:this._y,width:this._width,height:this._height}},getBbox:function(){return[[this._x,this._y],[this.getXend(),this.getYend()]]},refixAxisShape:function(t){for(var e,i,n,o=t.xAxis._axisList.concat(t.yAxis?t.yAxis._axisList:[]),s=o.length;s--;)n=o[s],n.type==a.COMPONENT_TYPE_AXIS_VALUE&&n._min<0&&n._max>=0&&(n.isHorizontal()?e=n.getCoord(0):i=n.getCoord(0));if("undefined"!=typeof e||"undefined"!=typeof i)for(s=o.length;s--;)o[s].refixAxisShape(e,i)},refresh:function(t){if(t||this._zrWidth!=this.zr.getWidth()||this._zrHeight!=this.zr.getHeight()){this.clear(),this.option=t||this.option,this.option.grid=this.reformOption(this.option.grid);var e=this.option.grid;this._zrWidth=this.zr.getWidth(),this._zrHeight=this.zr.getHeight(),this._x=this.parsePercent(e.x,this._zrWidth),this._y=this.parsePercent(e.y,this._zrHeight);var i=this.parsePercent(e.x2,this._zrWidth),a=this.parsePercent(e.y2,this._zrHeight);this._width="undefined"==typeof e.width?this._zrWidth-this._x-i:this.parsePercent(e.width,this._zrWidth),this._width=this._width<=0?10:this._width,this._height="undefined"==typeof e.height?this._zrHeight-this._y-a:this.parsePercent(e.height,this._zrHeight),this._height=this._height<=0?10:this._height,this._x=this.subPixelOptimize(this._x,e.borderWidth),this._y=this.subPixelOptimize(this._y,e.borderWidth),this.shapeList.push(new n({zlevel:this.getZlevelBase(),z:this.getZBase(),hoverable:!1,style:{x:this._x,y:this._y,width:this._width,height:this._height,brushType:e.borderWidth>0?"both":"fill",color:e.backgroundColor,strokeColor:e.borderColor,lineWidth:e.borderWidth}})),this.zr.addShape(this.shapeList[0])}}},o.inherits(e,i),t("../component").define("grid",e),e}),define("echarts/component/dataZoom",["require","./base","zrender/shape/Rectangle","zrender/shape/Polygon","../util/shape/Icon","../config","../util/date","zrender/tool/util","../component"],function(t){function e(t,e,n,a,o){i.call(this,t,e,n,a,o);var s=this;s._ondrift=function(t,e){return s.__ondrift(this,t,e)},s._ondragend=function(){return s.__ondragend()},this._fillerSize=28,this._isSilence=!1,this._zoom={},this.option.dataZoom=this.reformOption(this.option.dataZoom),this.zoomOption=this.option.dataZoom,this._handleSize=this.zoomOption.handleSize,this.myChart.canvasSupported||(this.zoomOption.realtime=!1),this._location=this._getLocation(),this._zoom=this._getZoom(),this._backupData(),this.option.dataZoom.show&&this._buildShape(),this._syncData()}var i=t("./base"),n=t("zrender/shape/Rectangle"),a=t("zrender/shape/Polygon"),o=t("../util/shape/Icon"),s=t("../config"),r=t("../util/date"),h=t("zrender/tool/util");return e.prototype={type:s.COMPONENT_TYPE_DATAZOOM,_buildShape:function(){this._buildBackground(),this._buildFiller(),this._buildHandle(),this._buildFrame();for(var t=0,e=this.shapeList.length;e>t;t++)this.zr.addShape(this.shapeList[t]);this._syncFrameShape()},_getLocation:function(){var t,e,i,n,a=this.component.grid;return"horizontal"==this.zoomOption.orient?(i=this.zoomOption.width||a.getWidth(),n=this.zoomOption.height||this._fillerSize,t=null!=this.zoomOption.x?this.zoomOption.x:a.getX(),e=null!=this.zoomOption.y?this.zoomOption.y:this.zr.getHeight()-n-2):(i=this.zoomOption.width||this._fillerSize,n=this.zoomOption.height||a.getHeight(),t=null!=this.zoomOption.x?this.zoomOption.x:2,e=null!=this.zoomOption.y?this.zoomOption.y:a.getY()),{x:t,y:e,width:i,height:n}},_getZoom:function(){var t=this.option.series,e=this.option.xAxis;!e||e instanceof Array||(e=[e],this.option.xAxis=e);var i=this.option.yAxis;!i||i instanceof Array||(i=[i],this.option.yAxis=i);var n,a,o=[],r=this.zoomOption.xAxisIndex;if(e&&null==r){n=[];for(var h=0,l=e.length;l>h;h++)("category"==e[h].type||null==e[h].type)&&n.push(h)}else n=r instanceof Array?r:null!=r?[r]:[];if(r=this.zoomOption.yAxisIndex,i&&null==r){a=[];for(var h=0,l=i.length;l>h;h++)"category"==i[h].type&&a.push(h)}else a=r instanceof Array?r:null!=r?[r]:[];for(var d,h=0,l=t.length;l>h;h++)if(d=t[h],d.type==s.CHART_TYPE_LINE||d.type==s.CHART_TYPE_BAR||d.type==s.CHART_TYPE_SCATTER||d.type==s.CHART_TYPE_K){for(var p=0,m=n.length;m>p;p++)if(n[p]==(d.xAxisIndex||0)){o.push(h);break}for(var p=0,m=a.length;m>p;p++)if(a[p]==(d.yAxisIndex||0)){o.push(h);break}null==this.zoomOption.xAxisIndex&&null==this.zoomOption.yAxisIndex&&d.data&&this.getDataFromOption(d.data[0])instanceof Array&&(d.type==s.CHART_TYPE_SCATTER||d.type==s.CHART_TYPE_LINE||d.type==s.CHART_TYPE_BAR)&&o.push(h)}var c=null!=this._zoom.start?this._zoom.start:null!=this.zoomOption.start?this.zoomOption.start:0,u=null!=this._zoom.end?this._zoom.end:null!=this.zoomOption.end?this.zoomOption.end:100;c>u&&(c+=u,u=c-u,c-=u);var g=Math.round((u-c)/100*("horizontal"==this.zoomOption.orient?this._location.width:this._location.height));return{start:c,end:u,start2:0,end2:100,size:g,xAxisIndex:n,yAxisIndex:a,seriesIndex:o,scatterMap:this._zoom.scatterMap||{}}},_backupData:function(){this._originalData={xAxis:{},yAxis:{},series:{}};for(var t=this.option.xAxis,e=this._zoom.xAxisIndex,i=0,n=e.length;n>i;i++)this._originalData.xAxis[e[i]]=t[e[i]].data;for(var a=this.option.yAxis,o=this._zoom.yAxisIndex,i=0,n=o.length;n>i;i++)this._originalData.yAxis[o[i]]=a[o[i]].data;for(var r,h=this.option.series,l=this._zoom.seriesIndex,i=0,n=l.length;n>i;i++)r=h[l[i]],this._originalData.series[l[i]]=r.data,r.data&&this.getDataFromOption(r.data[0])instanceof Array&&(r.type==s.CHART_TYPE_SCATTER||r.type==s.CHART_TYPE_LINE||r.type==s.CHART_TYPE_BAR)&&(this._backupScale(),this._calculScatterMap(l[i]))},_calculScatterMap:function(e){this._zoom.scatterMap=this._zoom.scatterMap||{},this._zoom.scatterMap[e]=this._zoom.scatterMap[e]||{};var i=t("../component"),n=i.get("axis"),a=h.clone(this.option.xAxis);"category"==a[0].type&&(a[0].type="value"),a[1]&&"category"==a[1].type&&(a[1].type="value");var o=new n(this.ecTheme,null,!1,{xAxis:a,series:this.option.series},this,"xAxis"),s=this.option.series[e].xAxisIndex||0;this._zoom.scatterMap[e].x=o.getAxis(s).getExtremum(),o.dispose(),a=h.clone(this.option.yAxis),"category"==a[0].type&&(a[0].type="value"),a[1]&&"category"==a[1].type&&(a[1].type="value"),o=new n(this.ecTheme,null,!1,{yAxis:a,series:this.option.series},this,"yAxis"),s=this.option.series[e].yAxisIndex||0,this._zoom.scatterMap[e].y=o.getAxis(s).getExtremum(),o.dispose()},_buildBackground:function(){var t=this._location.width,e=this._location.height;this.shapeList.push(new n({zlevel:this.getZlevelBase(),z:this.getZBase(),hoverable:!1,style:{x:this._location.x,y:this._location.y,width:t,height:e,color:this.zoomOption.backgroundColor}}));for(var i=0,o=this._originalData.xAxis,r=this._zoom.xAxisIndex,h=0,l=r.length;l>h;h++)i=Math.max(i,o[r[h]].length);for(var d=this._originalData.yAxis,p=this._zoom.yAxisIndex,h=0,l=p.length;l>h;h++)i=Math.max(i,d[p[h]].length);for(var m,c=this._zoom.seriesIndex[0],u=this._originalData.series[c],g=Number.MIN_VALUE,y=Number.MAX_VALUE,h=0,l=u.length;l>h;h++)m=this.getDataFromOption(u[h],0),this.option.series[c].type==s.CHART_TYPE_K&&(m=m[1]),isNaN(m)&&(m=0),g=Math.max(g,m),y=Math.min(y,m);var V=g-y,f=[],U=t/(i-(i>1?1:0)),_=e/(i-(i>1?1:0)),b=1;"horizontal"==this.zoomOption.orient&&1>U?b=Math.floor(3*i/t):"vertical"==this.zoomOption.orient&&1>_&&(b=Math.floor(3*i/e));for(var h=0,l=i;l>h;h+=b)m=this.getDataFromOption(u[h],0),this.option.series[c].type==s.CHART_TYPE_K&&(m=m[1]),isNaN(m)&&(m=0),f.push("horizontal"==this.zoomOption.orient?[this._location.x+U*h,this._location.y+e-1-Math.round((m-y)/V*(e-10))]:[this._location.x+1+Math.round((m-y)/V*(t-10)),this._location.y+_*h]);"horizontal"==this.zoomOption.orient?(f.push([this._location.x+t,this._location.y+e]),f.push([this._location.x,this._location.y+e])):(f.push([this._location.x,this._location.y+e]),f.push([this._location.x,this._location.y])),this.shapeList.push(new a({zlevel:this.getZlevelBase(),z:this.getZBase(),style:{pointList:f,color:this.zoomOption.dataBackgroundColor},hoverable:!1}))},_buildFiller:function(){this._fillerShae={zlevel:this.getZlevelBase(),z:this.getZBase(),draggable:!0,ondrift:this._ondrift,ondragend:this._ondragend,_type:"filler"},this._fillerShae.style="horizontal"==this.zoomOption.orient?{x:this._location.x+Math.round(this._zoom.start/100*this._location.width)+this._handleSize,y:this._location.y,width:this._zoom.size-2*this._handleSize,height:this._location.height,color:this.zoomOption.fillerColor,text:":::",textPosition:"inside"}:{x:this._location.x,y:this._location.y+Math.round(this._zoom.start/100*this._location.height)+this._handleSize,width:this._location.width,height:this._zoom.size-2*this._handleSize,color:this.zoomOption.fillerColor,text:"::",textPosition:"inside"},this._fillerShae.highlightStyle={brushType:"fill",color:"rgba(0,0,0,0)"},this._fillerShae=new n(this._fillerShae),this.shapeList.push(this._fillerShae)},_buildHandle:function(){var t=this.zoomOption.showDetail?this._getDetail():{start:"",end:""};this._startShape={zlevel:this.getZlevelBase(),z:this.getZBase(),draggable:!0,style:{iconType:"rectangle",x:this._location.x,y:this._location.y,width:this._handleSize,height:this._handleSize,color:this.zoomOption.handleColor,text:"=",textPosition:"inside"},highlightStyle:{text:t.start,brushType:"fill",textPosition:"left"},ondrift:this._ondrift,ondragend:this._ondragend},"horizontal"==this.zoomOption.orient?(this._startShape.style.height=this._location.height,this._endShape=h.clone(this._startShape),this._startShape.style.x=this._fillerShae.style.x-this._handleSize,this._endShape.style.x=this._fillerShae.style.x+this._fillerShae.style.width,this._endShape.highlightStyle.text=t.end,this._endShape.highlightStyle.textPosition="right"):(this._startShape.style.width=this._location.width,this._endShape=h.clone(this._startShape),this._startShape.style.y=this._fillerShae.style.y-this._handleSize,this._startShape.highlightStyle.textPosition="top",this._endShape.style.y=this._fillerShae.style.y+this._fillerShae.style.height,this._endShape.highlightStyle.text=t.end,this._endShape.highlightStyle.textPosition="bottom"),this._startShape=new o(this._startShape),this._endShape=new o(this._endShape),this.shapeList.push(this._startShape),this.shapeList.push(this._endShape)},_buildFrame:function(){var t=this.subPixelOptimize(this._location.x,1),e=this.subPixelOptimize(this._location.y,1);this._startFrameShape={zlevel:this.getZlevelBase(),z:this.getZBase(),hoverable:!1,style:{x:t,y:e,width:this._location.width-(t>this._location.x?1:0),height:this._location.height-(e>this._location.y?1:0),lineWidth:1,brushType:"stroke",strokeColor:this.zoomOption.handleColor}},this._endFrameShape=h.clone(this._startFrameShape),this._startFrameShape=new n(this._startFrameShape),this._endFrameShape=new n(this._endFrameShape),this.shapeList.push(this._startFrameShape),this.shapeList.push(this._endFrameShape)},_syncHandleShape:function(){"horizontal"==this.zoomOption.orient?(this._startShape.style.x=this._fillerShae.style.x-this._handleSize,this._endShape.style.x=this._fillerShae.style.x+this._fillerShae.style.width,this._zoom.start=(this._startShape.style.x-this._location.x)/this._location.width*100,this._zoom.end=(this._endShape.style.x+this._handleSize-this._location.x)/this._location.width*100):(this._startShape.style.y=this._fillerShae.style.y-this._handleSize,this._endShape.style.y=this._fillerShae.style.y+this._fillerShae.style.height,this._zoom.start=(this._startShape.style.y-this._location.y)/this._location.height*100,this._zoom.end=(this._endShape.style.y+this._handleSize-this._location.y)/this._location.height*100),this.zr.modShape(this._startShape.id),this.zr.modShape(this._endShape.id),this._syncFrameShape(),this.zr.refresh()},_syncFillerShape:function(){var t,e;"horizontal"==this.zoomOption.orient?(t=this._startShape.style.x,e=this._endShape.style.x,this._fillerShae.style.x=Math.min(t,e)+this._handleSize,this._fillerShae.style.width=Math.abs(t-e)-this._handleSize,this._zoom.start=(Math.min(t,e)-this._location.x)/this._location.width*100,this._zoom.end=(Math.max(t,e)+this._handleSize-this._location.x)/this._location.width*100):(t=this._startShape.style.y,e=this._endShape.style.y,this._fillerShae.style.y=Math.min(t,e)+this._handleSize,this._fillerShae.style.height=Math.abs(t-e)-this._handleSize,this._zoom.start=(Math.min(t,e)-this._location.y)/this._location.height*100,this._zoom.end=(Math.max(t,e)+this._handleSize-this._location.y)/this._location.height*100),this.zr.modShape(this._fillerShae.id),this._syncFrameShape(),this.zr.refresh()},_syncFrameShape:function(){"horizontal"==this.zoomOption.orient?(this._startFrameShape.style.width=this._fillerShae.style.x-this._location.x,this._endFrameShape.style.x=this._fillerShae.style.x+this._fillerShae.style.width,this._endFrameShape.style.width=this._location.x+this._location.width-this._endFrameShape.style.x):(this._startFrameShape.style.height=this._fillerShae.style.y-this._location.y,this._endFrameShape.style.y=this._fillerShae.style.y+this._fillerShae.style.height,this._endFrameShape.style.height=this._location.y+this._location.height-this._endFrameShape.style.y),this.zr.modShape(this._startFrameShape.id),this.zr.modShape(this._endFrameShape.id)},_syncShape:function(){this.zoomOption.show&&("horizontal"==this.zoomOption.orient?(this._startShape.style.x=this._location.x+this._zoom.start/100*this._location.width,this._endShape.style.x=this._location.x+this._zoom.end/100*this._location.width-this._handleSize,this._fillerShae.style.x=this._startShape.style.x+this._handleSize,this._fillerShae.style.width=this._endShape.style.x-this._startShape.style.x-this._handleSize):(this._startShape.style.y=this._location.y+this._zoom.start/100*this._location.height,this._endShape.style.y=this._location.y+this._zoom.end/100*this._location.height-this._handleSize,this._fillerShae.style.y=this._startShape.style.y+this._handleSize,this._fillerShae.style.height=this._endShape.style.y-this._startShape.style.y-this._handleSize),this.zr.modShape(this._startShape.id),this.zr.modShape(this._endShape.id),this.zr.modShape(this._fillerShae.id),this._syncFrameShape(),this.zr.refresh())},_syncData:function(t){var e,i,n,a,o;for(var r in this._originalData){e=this._originalData[r];for(var h in e)o=e[h],null!=o&&(a=o.length,i=Math.floor(this._zoom.start/100*a),n=Math.ceil(this._zoom.end/100*a),this.getDataFromOption(o[0])instanceof Array&&this.option[r][h].type!=s.CHART_TYPE_K?(this._setScale(),this.option[r][h].data=this._synScatterData(h,o)):this.option[r][h].data=o.slice(i,n))}this._isSilence||!this.zoomOption.realtime&&!t||this.messageCenter.dispatch(s.EVENT.DATA_ZOOM,null,{zoom:this._zoom},this.myChart)},_synScatterData:function(t,e){if(0===this._zoom.start&&100==this._zoom.end&&0===this._zoom.start2&&100==this._zoom.end2)return e;var i,n,a,o,s,r=[],h=this._zoom.scatterMap[t];"horizontal"==this.zoomOption.orient?(i=h.x.max-h.x.min,n=this._zoom.start/100*i+h.x.min,a=this._zoom.end/100*i+h.x.min,i=h.y.max-h.y.min,o=this._zoom.start2/100*i+h.y.min,s=this._zoom.end2/100*i+h.y.min):(i=h.x.max-h.x.min,n=this._zoom.start2/100*i+h.x.min,a=this._zoom.end2/100*i+h.x.min,i=h.y.max-h.y.min,o=this._zoom.start/100*i+h.y.min,s=this._zoom.end/100*i+h.y.min);for(var l,d=0,p=e.length;p>d;d++)l=e[d].value||e[d],l[0]>=n&&l[0]<=a&&l[1]>=o&&l[1]<=s&&r.push(e[d]);return r},_setScale:function(){var t=0!==this._zoom.start||100!==this._zoom.end||0!==this._zoom.start2||100!==this._zoom.end2,e={xAxis:this.option.xAxis,yAxis:this.option.yAxis};for(var i in e)for(var n=0,a=e[i].length;a>n;n++)e[i][n].scale=t||e[i][n]._scale},_backupScale:function(){var t={xAxis:this.option.xAxis,yAxis:this.option.yAxis};for(var e in t)for(var i=0,n=t[e].length;n>i;i++)t[e][i]._scale=t[e][i].scale},_getDetail:function(){var t="horizontal"==this.zoomOption.orient?"xAxis":"yAxis",e=this._originalData[t];for(var i in e){var n=e[i];if(null!=n){var a=n.length,o=Math.floor(this._zoom.start/100*a),s=Math.ceil(this._zoom.end/100*a);return s-=s>0?1:0,{start:this.getDataFromOption(n[o]),end:this.getDataFromOption(n[s])}}}var h=this._zoom.seriesIndex[0],l=this.option.series[h][t+"Index"]||0,d=this.option[t][l].type,p=this._zoom.scatterMap[h][t.charAt(0)].min,m=this._zoom.scatterMap[h][t.charAt(0)].max,c=m-p;if("value"==d)return{start:p+c*this._zoom.start/100,end:p+c*this._zoom.end/100};if("time"==d){m=p+c*this._zoom.end/100,p+=c*this._zoom.start/100;var u=r.getAutoFormatter(p,m).formatter;return{start:r.format(u,p),end:r.format(u,m)}}return{start:"",end:""}},__ondrift:function(t,e,i){this.zoomOption.zoomLock&&(t=this._fillerShae);var n="filler"==t._type?this._handleSize:0;if("horizontal"==this.zoomOption.orient?t.style.x+e-n<=this._location.x?t.style.x=this._location.x+n:t.style.x+e+t.style.width+n>=this._location.x+this._location.width?t.style.x=this._location.x+this._location.width-t.style.width-n:t.style.x+=e:t.style.y+i-n<=this._location.y?t.style.y=this._location.y+n:t.style.y+i+t.style.height+n>=this._location.y+this._location.height?t.style.y=this._location.y+this._location.height-t.style.height-n:t.style.y+=i,"filler"==t._type?this._syncHandleShape():this._syncFillerShape(),this.zoomOption.realtime&&this._syncData(),this.zoomOption.showDetail){var a=this._getDetail();this._startShape.style.text=this._startShape.highlightStyle.text=a.start,this._endShape.style.text=this._endShape.highlightStyle.text=a.end,this._startShape.style.textPosition=this._startShape.highlightStyle.textPosition,this._endShape.style.textPosition=this._endShape.highlightStyle.textPosition}return!0},__ondragend:function(){this.zoomOption.showDetail&&(this._startShape.style.text=this._endShape.style.text="=",this._startShape.style.textPosition=this._endShape.style.textPosition="inside",this.zr.modShape(this._startShape.id),this.zr.modShape(this._endShape.id),this.zr.refreshNextFrame()),this.isDragend=!0},ondragend:function(t,e){this.isDragend&&t.target&&(!this.zoomOption.realtime&&this._syncData(),e.dragOut=!0,e.dragIn=!0,this._isSilence||this.zoomOption.realtime||this.messageCenter.dispatch(s.EVENT.DATA_ZOOM,null,{zoom:this._zoom},this.myChart),e.needRefresh=!1,this.isDragend=!1)},ondataZoom:function(t,e){e.needRefresh=!0},absoluteZoom:function(t){this._zoom.start=t.start,this._zoom.end=t.end,this._zoom.start2=t.start2,this._zoom.end2=t.end2,this._syncShape(),this._syncData(!0)},rectZoom:function(t){if(!t)return this._zoom.start=this._zoom.start2=0,this._zoom.end=this._zoom.end2=100,this._syncShape(),this._syncData(!0),this._zoom;var e=this.component.grid.getArea(),i={x:t.x,y:t.y,width:t.width,height:t.height};if(i.width<0&&(i.x+=i.width,i.width=-i.width),i.height<0&&(i.y+=i.height,i.height=-i.height),i.x>e.x+e.width||i.y>e.y+e.height)return!1;i.x<e.x&&(i.x=e.x),i.x+i.width>e.x+e.width&&(i.width=e.x+e.width-i.x),i.y+i.height>e.y+e.height&&(i.height=e.y+e.height-i.y);var n,a=(i.x-e.x)/e.width,o=1-(i.x+i.width-e.x)/e.width,s=1-(i.y+i.height-e.y)/e.height,r=(i.y-e.y)/e.height;return"horizontal"==this.zoomOption.orient?(n=this._zoom.end-this._zoom.start,this._zoom.start+=n*a,this._zoom.end-=n*o,n=this._zoom.end2-this._zoom.start2,this._zoom.start2+=n*s,this._zoom.end2-=n*r):(n=this._zoom.end-this._zoom.start,this._zoom.start+=n*s,this._zoom.end-=n*r,n=this._zoom.end2-this._zoom.start2,this._zoom.start2+=n*a,this._zoom.end2-=n*o),this._syncShape(),this._syncData(!0),this._zoom},syncBackupData:function(t){for(var e,i,n=this._originalData.series,a=t.series,o=0,s=a.length;s>o;o++){i=a[o].data||a[o].eventList,e=n[o]?Math.floor(this._zoom.start/100*n[o].length):0;for(var r=0,h=i.length;h>r;r++)n[o]&&(n[o][r+e]=i[r])}},syncOption:function(t){this.silence(!0),this.option=t,this.option.dataZoom=this.reformOption(this.option.dataZoom),this.zoomOption=this.option.dataZoom,this.myChart.canvasSupported||(this.zoomOption.realtime=!1),this.clear(),this._location=this._getLocation(),this._zoom=this._getZoom(),this._backupData(),this.option.dataZoom&&this.option.dataZoom.show&&this._buildShape(),this._syncData(),this.silence(!1)},silence:function(t){this._isSilence=t},getRealDataIndex:function(t,e){if(!this._originalData||0===this._zoom.start&&100==this._zoom.end)return e;var i=this._originalData.series;return i[t]?Math.floor(this._zoom.start/100*i[t].length)+e:-1},resize:function(){this.clear(),this._location=this._getLocation(),this._zoom=this._getZoom(),this.option.dataZoom.show&&this._buildShape()}},h.inherits(e,i),t("../component").define("dataZoom",e),e}),define("echarts/component/categoryAxis",["require","./base","zrender/shape/Text","zrender/shape/Line","zrender/shape/Rectangle","../config","zrender/tool/util","zrender/tool/area","../component"],function(t){function e(t,e,n,a,o,s){if(a.data.length<1)return void console.error("option.data.length < 1.");i.call(this,t,e,n,a,o),this.grid=this.component.grid;for(var r in s)this[r]=s[r];this.refresh(a)}var i=t("./base"),n=t("zrender/shape/Text"),a=t("zrender/shape/Line"),o=t("zrender/shape/Rectangle"),s=t("../config"),r=t("zrender/tool/util"),h=t("zrender/tool/area");return e.prototype={type:s.COMPONENT_TYPE_AXIS_CATEGORY,_getReformedLabel:function(t){var e=this.getDataFromOption(this.option.data[t]),i=this.option.data[t].formatter||this.option.axisLabel.formatter;return i&&("function"==typeof i?e=i.call(this.myChart,e):"string"==typeof i&&(e=i.replace("{value}",e))),e},_getInterval:function(){var t=this.option.axisLabel.interval;
if("auto"==t){var e=this.option.axisLabel.textStyle.fontSize,i=this.option.data,n=this.option.data.length;if(this.isHorizontal())if(n>3){var a,o,s=this.getGap(),l=!1,d=Math.floor(.5/s);for(d=1>d?1:d,t=Math.floor(15/s);!l&&n>t;){t+=d,l=!0,a=Math.floor(s*t);for(var p=Math.floor((n-1)/t)*t;p>=0;p-=t){if(0!==this.option.axisLabel.rotate)o=e;else if(i[p].textStyle)o=h.getTextWidth(this._getReformedLabel(p),this.getFont(r.merge(i[p].textStyle,this.option.axisLabel.textStyle)));else{var m=this._getReformedLabel(p)+"",c=(m.match(/\w/g)||"").length,u=m.length-c;o=c*e*2/3+u*e}if(o>a){l=!1;break}}}}else t=1;else if(n>3){var s=this.getGap();for(t=Math.floor(11/s);e>s*t-6&&n>t;)t++}else t=1}else t="function"==typeof t?1:t-0+1;return t},_buildShape:function(){if(this._interval=this._getInterval(),this.option.show){this.option.splitArea.show&&this._buildSplitArea(),this.option.splitLine.show&&this._buildSplitLine(),this.option.axisLine.show&&this._buildAxisLine(),this.option.axisTick.show&&this._buildAxisTick(),this.option.axisLabel.show&&this._buildAxisLabel();for(var t=0,e=this.shapeList.length;e>t;t++)this.zr.addShape(this.shapeList[t])}},_buildAxisTick:function(){var t,e=this.option.data,i=this.option.data.length,n=this.option.axisTick,o=n.length,s=n.lineStyle.color,r=n.lineStyle.width,h="function"==typeof n.interval?n.interval:"auto"==n.interval&&"function"==typeof this.option.axisLabel.interval?this.option.axisLabel.interval:!1,l=h?1:"auto"==n.interval?this._interval:n.interval-0+1,d=n.onGap,p=d?this.getGap()/2:"undefined"==typeof d&&this.option.boundaryGap?this.getGap()/2:0,m=p>0?-l:0;if(this.isHorizontal())for(var c,u="bottom"==this.option.position?n.inside?this.grid.getYend()-o-1:this.grid.getYend()+1:n.inside?this.grid.getY()+1:this.grid.getY()-o-1,g=m;i>g;g+=l)(!h||h(g,e[g]))&&(c=this.subPixelOptimize(this.getCoordByIndex(g)+(g>=0?p:0),r),t={_axisShape:"axisTick",zlevel:this.getZlevelBase(),z:this.getZBase(),hoverable:!1,style:{xStart:c,yStart:u,xEnd:c,yEnd:u+o,strokeColor:s,lineWidth:r}},this.shapeList.push(new a(t)));else for(var y,V="left"==this.option.position?n.inside?this.grid.getX()+1:this.grid.getX()-o-1:n.inside?this.grid.getXend()-o-1:this.grid.getXend()+1,g=m;i>g;g+=l)(!h||h(g,e[g]))&&(y=this.subPixelOptimize(this.getCoordByIndex(g)-(g>=0?p:0),r),t={_axisShape:"axisTick",zlevel:this.getZlevelBase(),z:this.getZBase(),hoverable:!1,style:{xStart:V,yStart:y,xEnd:V+o,yEnd:y,strokeColor:s,lineWidth:r}},this.shapeList.push(new a(t)))},_buildAxisLabel:function(){var t,e,i=this.option.data,a=this.option.data.length,o=this.option.axisLabel,s=o.rotate,h=o.margin,l=o.clickable,d=o.textStyle,p="function"==typeof o.interval?o.interval:!1;if(this.isHorizontal()){var m,c;"bottom"==this.option.position?(m=this.grid.getYend()+h,c="top"):(m=this.grid.getY()-h,c="bottom");for(var u=0;a>u;u+=this._interval)p&&!p(u,i[u])||""===this._getReformedLabel(u)||(e=r.merge(i[u].textStyle||{},d),t={zlevel:this.getZlevelBase(),z:this.getZBase()+3,hoverable:!1,style:{x:this.getCoordByIndex(u),y:m,color:e.color,text:this._getReformedLabel(u),textFont:this.getFont(e),textAlign:e.align||"center",textBaseline:e.baseline||c}},s&&(t.style.textAlign=s>0?"bottom"==this.option.position?"right":"left":"bottom"==this.option.position?"left":"right",t.rotation=[s*Math.PI/180,t.style.x,t.style.y]),this.shapeList.push(new n(this._axisLabelClickable(l,t))))}else{var g,y;"left"==this.option.position?(g=this.grid.getX()-h,y="right"):(g=this.grid.getXend()+h,y="left");for(var u=0;a>u;u+=this._interval)p&&!p(u,i[u])||""===this._getReformedLabel(u)||(e=r.merge(i[u].textStyle||{},d),t={zlevel:this.getZlevelBase(),z:this.getZBase()+3,hoverable:!1,style:{x:g,y:this.getCoordByIndex(u),color:e.color,text:this._getReformedLabel(u),textFont:this.getFont(e),textAlign:e.align||y,textBaseline:e.baseline||0===u&&""!==this.option.name?"bottom":u==a-1&&""!==this.option.name?"top":"middle"}},s&&(t.rotation=[s*Math.PI/180,t.style.x,t.style.y]),this.shapeList.push(new n(this._axisLabelClickable(l,t))))}},_buildSplitLine:function(){var t,e=this.option.data,i=this.option.data.length,n=this.option.splitLine,o=n.lineStyle.type,s=n.lineStyle.width,r=n.lineStyle.color;r=r instanceof Array?r:[r];var h=r.length,l="function"==typeof this.option.axisLabel.interval?this.option.axisLabel.interval:!1,d=n.onGap,p=d?this.getGap()/2:"undefined"==typeof d&&this.option.boundaryGap?this.getGap()/2:0;if(i-=d||"undefined"==typeof d&&this.option.boundaryGap?1:0,this.isHorizontal())for(var m,c=this.grid.getY(),u=this.grid.getYend(),g=0;i>g;g+=this._interval)(!l||l(g,e[g]))&&(m=this.subPixelOptimize(this.getCoordByIndex(g)+p,s),t={zlevel:this.getZlevelBase(),z:this.getZBase(),hoverable:!1,style:{xStart:m,yStart:c,xEnd:m,yEnd:u,strokeColor:r[g/this._interval%h],lineType:o,lineWidth:s}},this.shapeList.push(new a(t)));else for(var y,V=this.grid.getX(),f=this.grid.getXend(),g=0;i>g;g+=this._interval)(!l||l(g,e[g]))&&(y=this.subPixelOptimize(this.getCoordByIndex(g)-p,s),t={zlevel:this.getZlevelBase(),z:this.getZBase(),hoverable:!1,style:{xStart:V,yStart:y,xEnd:f,yEnd:y,strokeColor:r[g/this._interval%h],lineType:o,lineWidth:s}},this.shapeList.push(new a(t)))},_buildSplitArea:function(){var t,e=this.option.data,i=this.option.splitArea,n=i.areaStyle.color;if(n instanceof Array){var a=n.length,s=this.option.data.length,r="function"==typeof this.option.axisLabel.interval?this.option.axisLabel.interval:!1,h=i.onGap,l=h?this.getGap()/2:"undefined"==typeof h&&this.option.boundaryGap?this.getGap()/2:0;if(this.isHorizontal())for(var d,p=this.grid.getY(),m=this.grid.getHeight(),c=this.grid.getX(),u=0;s>=u;u+=this._interval)r&&!r(u,e[u])&&s>u||(d=s>u?this.getCoordByIndex(u)+l:this.grid.getXend(),t={zlevel:this.getZlevelBase(),z:this.getZBase(),hoverable:!1,style:{x:c,y:p,width:d-c,height:m,color:n[u/this._interval%a]}},this.shapeList.push(new o(t)),c=d);else for(var g,y=this.grid.getX(),V=this.grid.getWidth(),f=this.grid.getYend(),u=0;s>=u;u+=this._interval)r&&!r(u,e[u])&&s>u||(g=s>u?this.getCoordByIndex(u)-l:this.grid.getY(),t={zlevel:this.getZlevelBase(),z:this.getZBase(),hoverable:!1,style:{x:y,y:g,width:V,height:f-g,color:n[u/this._interval%a]}},this.shapeList.push(new o(t)),f=g)}else t={zlevel:this.getZlevelBase(),z:this.getZBase(),hoverable:!1,style:{x:this.grid.getX(),y:this.grid.getY(),width:this.grid.getWidth(),height:this.grid.getHeight(),color:n}},this.shapeList.push(new o(t))},refresh:function(t){t&&(this.option=this.reformOption(t),this.option.axisLabel.textStyle=r.merge(this.option.axisLabel.textStyle||{},this.ecTheme.textStyle)),this.clear(),this._buildShape()},getGap:function(){var t=this.option.data.length,e=this.isHorizontal()?this.grid.getWidth():this.grid.getHeight();return this.option.boundaryGap?e/t:e/(t>1?t-1:1)},getCoord:function(t){for(var e=this.option.data,i=e.length,n=this.getGap(),a=this.option.boundaryGap?n/2:0,o=0;i>o;o++){if(this.getDataFromOption(e[o])==t)return a=this.isHorizontal()?this.grid.getX()+a:this.grid.getYend()-a;a+=n}},getCoordByIndex:function(t){if(0>t)return this.isHorizontal()?this.grid.getX():this.grid.getYend();if(t>this.option.data.length-1)return this.isHorizontal()?this.grid.getXend():this.grid.getY();var e=this.getGap(),i=this.option.boundaryGap?e/2:0;return i+=t*e,i=this.isHorizontal()?this.grid.getX()+i:this.grid.getYend()-i},getNameByIndex:function(t){return this.getDataFromOption(this.option.data[t])},getIndexByName:function(t){for(var e=this.option.data,i=e.length,n=0;i>n;n++)if(this.getDataFromOption(e[n])==t)return n;return-1},getValueFromCoord:function(){return""},isMainAxis:function(t){return t%this._interval===0}},r.inherits(e,i),t("../component").define("categoryAxis",e),e}),define("echarts/component/valueAxis",["require","./base","zrender/shape/Text","zrender/shape/Line","zrender/shape/Rectangle","../config","../util/date","zrender/tool/util","../util/smartSteps","../util/accMath","../component"],function(t){function e(t,e,n,a,o,s,r){if(!r||0===r.length)return void console.err("option.series.length == 0.");i.call(this,t,e,n,a,o),this.series=r,this.grid=this.component.grid;for(var h in s)this[h]=s[h];this.refresh(a,r)}var i=t("./base"),n=t("zrender/shape/Text"),a=t("zrender/shape/Line"),o=t("zrender/shape/Rectangle"),s=t("../config"),r=t("../util/date"),h=t("zrender/tool/util");return e.prototype={type:s.COMPONENT_TYPE_AXIS_VALUE,_buildShape:function(){if(this._hasData=!1,this._calculateValue(),this._hasData&&this.option.show){this.option.splitArea.show&&this._buildSplitArea(),this.option.splitLine.show&&this._buildSplitLine(),this.option.axisLine.show&&this._buildAxisLine(),this.option.axisTick.show&&this._buildAxisTick(),this.option.axisLabel.show&&this._buildAxisLabel();for(var t=0,e=this.shapeList.length;e>t;t++)this.zr.addShape(this.shapeList[t])}},_buildAxisTick:function(){var t,e=this._valueList,i=this._valueList.length,n=this.option.axisTick,o=n.length,s=n.lineStyle.color,r=n.lineStyle.width;if(this.isHorizontal())for(var h,l="bottom"===this.option.position?n.inside?this.grid.getYend()-o-1:this.grid.getYend()+1:n.inside?this.grid.getY()+1:this.grid.getY()-o-1,d=0;i>d;d++)h=this.subPixelOptimize(this.getCoord(e[d]),r),t={_axisShape:"axisTick",zlevel:this.getZlevelBase(),z:this.getZBase(),hoverable:!1,style:{xStart:h,yStart:l,xEnd:h,yEnd:l+o,strokeColor:s,lineWidth:r}},this.shapeList.push(new a(t));else for(var p,m="left"===this.option.position?n.inside?this.grid.getX()+1:this.grid.getX()-o-1:n.inside?this.grid.getXend()-o-1:this.grid.getXend()+1,d=0;i>d;d++)p=this.subPixelOptimize(this.getCoord(e[d]),r),t={_axisShape:"axisTick",zlevel:this.getZlevelBase(),z:this.getZBase(),hoverable:!1,style:{xStart:m,yStart:p,xEnd:m+o,yEnd:p,strokeColor:s,lineWidth:r}},this.shapeList.push(new a(t))},_buildAxisLabel:function(){var t,e=this._valueList,i=this._valueList.length,a=this.option.axisLabel.rotate,o=this.option.axisLabel.margin,s=this.option.axisLabel.clickable,r=this.option.axisLabel.textStyle;if(this.isHorizontal()){var h,l;"bottom"===this.option.position?(h=this.grid.getYend()+o,l="top"):(h=this.grid.getY()-o,l="bottom");for(var d=0;i>d;d++)t={zlevel:this.getZlevelBase(),z:this.getZBase()+3,hoverable:!1,style:{x:this.getCoord(e[d]),y:h,color:"function"==typeof r.color?r.color(e[d]):r.color,text:this._valueLabel[d],textFont:this.getFont(r),textAlign:r.align||"center",textBaseline:r.baseline||l}},a&&(t.style.textAlign=a>0?"bottom"===this.option.position?"right":"left":"bottom"===this.option.position?"left":"right",t.rotation=[a*Math.PI/180,t.style.x,t.style.y]),this.shapeList.push(new n(this._axisLabelClickable(s,t)))}else{var p,m;"left"===this.option.position?(p=this.grid.getX()-o,m="right"):(p=this.grid.getXend()+o,m="left");for(var d=0;i>d;d++)t={zlevel:this.getZlevelBase(),z:this.getZBase()+3,hoverable:!1,style:{x:p,y:this.getCoord(e[d]),color:"function"==typeof r.color?r.color(e[d]):r.color,text:this._valueLabel[d],textFont:this.getFont(r),textAlign:r.align||m,textBaseline:r.baseline||(0===d&&""!==this.option.name?"bottom":d===i-1&&""!==this.option.name?"top":"middle")}},a&&(t.rotation=[a*Math.PI/180,t.style.x,t.style.y]),this.shapeList.push(new n(this._axisLabelClickable(s,t)))}},_buildSplitLine:function(){var t,e=this._valueList,i=this._valueList.length,n=this.option.splitLine,o=n.lineStyle.type,s=n.lineStyle.width,r=n.lineStyle.color;r=r instanceof Array?r:[r];var h=r.length;if(this.isHorizontal())for(var l,d=this.grid.getY(),p=this.grid.getYend(),m=0;i>m;m++)l=this.subPixelOptimize(this.getCoord(e[m]),s),t={zlevel:this.getZlevelBase(),z:this.getZBase(),hoverable:!1,style:{xStart:l,yStart:d,xEnd:l,yEnd:p,strokeColor:r[m%h],lineType:o,lineWidth:s}},this.shapeList.push(new a(t));else for(var c,u=this.grid.getX(),g=this.grid.getXend(),m=0;i>m;m++)c=this.subPixelOptimize(this.getCoord(e[m]),s),t={zlevel:this.getZlevelBase(),z:this.getZBase(),hoverable:!1,style:{xStart:u,yStart:c,xEnd:g,yEnd:c,strokeColor:r[m%h],lineType:o,lineWidth:s}},this.shapeList.push(new a(t))},_buildSplitArea:function(){var t,e=this.option.splitArea.areaStyle.color;if(e instanceof Array){var i=e.length,n=this._valueList,a=this._valueList.length;if(this.isHorizontal())for(var s,r=this.grid.getY(),h=this.grid.getHeight(),l=this.grid.getX(),d=0;a>=d;d++)s=a>d?this.getCoord(n[d]):this.grid.getXend(),t={zlevel:this.getZlevelBase(),z:this.getZBase(),hoverable:!1,style:{x:l,y:r,width:s-l,height:h,color:e[d%i]}},this.shapeList.push(new o(t)),l=s;else for(var p,m=this.grid.getX(),c=this.grid.getWidth(),u=this.grid.getYend(),d=0;a>=d;d++)p=a>d?this.getCoord(n[d]):this.grid.getY(),t={zlevel:this.getZlevelBase(),z:this.getZBase(),hoverable:!1,style:{x:m,y:p,width:c,height:u-p,color:e[d%i]}},this.shapeList.push(new o(t)),u=p}else t={zlevel:this.getZlevelBase(),z:this.getZBase(),hoverable:!1,style:{x:this.grid.getX(),y:this.grid.getY(),width:this.grid.getWidth(),height:this.grid.getHeight(),color:e}},this.shapeList.push(new o(t))},_calculateValue:function(){if(isNaN(this.option.min-0)||isNaN(this.option.max-0)){for(var t,e,i={},n=this.component.legend,a=0,o=this.series.length;o>a;a++)!(this.series[a].type!=s.CHART_TYPE_LINE&&this.series[a].type!=s.CHART_TYPE_BAR&&this.series[a].type!=s.CHART_TYPE_SCATTER&&this.series[a].type!=s.CHART_TYPE_K&&this.series[a].type!=s.CHART_TYPE_EVENTRIVER||n&&!n.isSelected(this.series[a].name)||(t=this.series[a].xAxisIndex||0,e=this.series[a].yAxisIndex||0,this.option.xAxisIndex!=t&&this.option.yAxisIndex!=e||!this._calculSum(i,a)));var r;for(var a in i){r=i[a];for(var h=0,l=r.length;l>h;h++)if(!isNaN(r[h])){this._hasData=!0,this._min=r[h],this._max=r[h];break}if(this._hasData)break}for(var a in i){r=i[a];for(var h=0,l=r.length;l>h;h++)isNaN(r[h])||(this._min=Math.min(this._min,r[h]),this._max=Math.max(this._max,r[h]))}var d=Math.abs(this._max-this._min);this._min=isNaN(this.option.min-0)?this._min-Math.abs(d*this.option.boundaryGap[0]):this.option.min-0,this._max=isNaN(this.option.max-0)?this._max+Math.abs(d*this.option.boundaryGap[1]):this.option.max-0,this._min===this._max&&(0===this._max?this._max=1:this._max>0?this._min=this._max/this.option.splitNumber!=null?this.option.splitNumber:5:this._max=this._max/this.option.splitNumber!=null?this.option.splitNumber:5),"time"!=this.option.type?this._reformValue(this.option.scale):this._reformTimeValue()}else this._hasData=!0,this._min=this.option.min-0,this._max=this.option.max-0,"time"!=this.option.type?this._customerValue():this._reformTimeValue()},_calculSum:function(t,e){var i,n,a=this.series[e].name||"kener";if(this.series[e].stack){var o="__Magic_Key_Positive__"+this.series[e].stack,h="__Magic_Key_Negative__"+this.series[e].stack;t[o]=t[o]||[],t[h]=t[h]||[],t[a]=t[a]||[],n=this.series[e].data;for(var l=0,d=n.length;d>l;l++)i=this.getDataFromOption(n[l]),"-"!==i&&(i-=0,i>=0?null!=t[o][l]?t[o][l]+=i:t[o][l]=i:null!=t[h][l]?t[h][l]+=i:t[h][l]=i,this.option.scale&&t[a].push(i))}else if(t[a]=t[a]||[],this.series[e].type!=s.CHART_TYPE_EVENTRIVER){n=this.series[e].data;for(var l=0,d=n.length;d>l;l++)i=this.getDataFromOption(n[l]),this.series[e].type===s.CHART_TYPE_K?(t[a].push(i[0]),t[a].push(i[1]),t[a].push(i[2]),t[a].push(i[3])):i instanceof Array?(-1!=this.option.xAxisIndex&&t[a].push("time"!=this.option.type?i[0]:r.getNewDate(i[0])),-1!=this.option.yAxisIndex&&t[a].push("time"!=this.option.type?i[1]:r.getNewDate(i[1]))):t[a].push(i)}else{n=this.series[e].eventList;for(var l=0,d=n.length;d>l;l++)for(var p=n[l].evolution,m=0,c=p.length;c>m;m++)t[a].push(r.getNewDate(p[m].time))}},_reformValue:function(e){var i=t("../util/smartSteps"),n=this.option.splitNumber;!e&&this._min>=0&&this._max>=0&&(this._min=0),!e&&this._min<=0&&this._max<=0&&(this._max=0);var a=i(this._min,this._max,n);n=null!=n?n:a.secs,this._min=a.min,this._max=a.max,this._valueList=a.pnts,this._reformLabelData()},_reformTimeValue:function(){var t=null!=this.option.splitNumber?this.option.splitNumber:5,e=r.getAutoFormatter(this._min,this._max,t),i=e.formatter,n=e.gapValue;this._valueList=[r.getNewDate(this._min)];var a;switch(i){case"week":a=r.nextMonday(this._min);break;case"month":a=r.nextNthOnMonth(this._min,1);break;case"quarter":a=r.nextNthOnQuarterYear(this._min,1);break;case"half-year":a=r.nextNthOnHalfYear(this._min,1);break;case"year":a=r.nextNthOnYear(this._min,1);break;default:72e5>=n?a=(Math.floor(this._min/n)+1)*n:(a=r.getNewDate(this._min- -n),a.setHours(6*Math.round(a.getHours()/6)),a.setMinutes(0),a.setSeconds(0))}for(a-this._min<n/2&&(a-=-n),e=r.getNewDate(a),t*=1.5;t-->=0&&(("month"==i||"quarter"==i||"half-year"==i||"year"==i)&&e.setDate(1),!(this._max-e<n/2));)this._valueList.push(e),e=r.getNewDate(e- -n);this._valueList.push(r.getNewDate(this._max)),this._reformLabelData(i)},_customerValue:function(){var e=t("../util/accMath"),i=null!=this.option.splitNumber?this.option.splitNumber:5,n=(this._max-this._min)/i;this._valueList=[];for(var a=0;i>=a;a++)this._valueList.push(e.accAdd(this._min,e.accMul(n,a)));this._reformLabelData()},_reformLabelData:function(t){this._valueLabel=[];var e=this.option.axisLabel.formatter;if(e)for(var i=0,n=this._valueList.length;n>i;i++)"function"==typeof e?this._valueLabel.push(t?e.call(this.myChart,this._valueList[i],t):e.call(this.myChart,this._valueList[i])):"string"==typeof e&&this._valueLabel.push(t?r.format(e,this._valueList[i]):e.replace("{value}",this._valueList[i]));else if(t)for(var i=0,n=this._valueList.length;n>i;i++)this._valueLabel.push(r.format(t,this._valueList[i]));else for(var i=0,n=this._valueList.length;n>i;i++)this._valueLabel.push(this.numAddCommas(this._valueList[i]))},getExtremum:function(){return this._calculateValue(),{min:this._min,max:this._max}},refresh:function(t,e){t&&(this.option=this.reformOption(t),this.option.axisLabel.textStyle=h.merge(this.option.axisLabel.textStyle||{},this.ecTheme.textStyle),this.series=e),this.zr&&(this.clear(),this._buildShape())},getCoord:function(t){t=t<this._min?this._min:t,t=t>this._max?this._max:t;var e;return e=this.isHorizontal()?this.grid.getX()+(t-this._min)/(this._max-this._min)*this.grid.getWidth():this.grid.getYend()-(t-this._min)/(this._max-this._min)*this.grid.getHeight()},getCoordSize:function(t){return Math.abs(this.isHorizontal()?t/(this._max-this._min)*this.grid.getWidth():t/(this._max-this._min)*this.grid.getHeight())},getValueFromCoord:function(t){var e;return this.isHorizontal()?(t=t<this.grid.getX()?this.grid.getX():t,t=t>this.grid.getXend()?this.grid.getXend():t,e=this._min+(t-this.grid.getX())/this.grid.getWidth()*(this._max-this._min)):(t=t<this.grid.getY()?this.grid.getY():t,t=t>this.grid.getYend()?this.grid.getYend():t,e=this._max-(t-this.grid.getY())/this.grid.getHeight()*(this._max-this._min)),e.toFixed(2)-0},isMaindAxis:function(t){for(var e=0,i=this._valueList.length;i>e;e++)if(this._valueList[e]===t)return!0;return!1}},h.inherits(e,i),t("../component").define("valueAxis",e),e}),define("echarts/util/date",[],function(){function t(t,e,i){i=i>1?i:2;for(var n,a,o,s,r=0,h=d.length;h>r;r++)if(n=d[r].value,a=Math.ceil(e/n)*n-Math.floor(t/n)*n,Math.round(a/n)<=1.2*i){o=d[r].formatter,s=d[r].value;break}return null==o&&(o="year",n=317088e5,a=Math.ceil(e/n)*n-Math.floor(t/n)*n,s=Math.round(a/(i-1)/n)*n),{formatter:o,gapValue:s}}function e(t){return 10>t?"0"+t:t}function i(t,i){("week"==t||"month"==t||"quarter"==t||"half-year"==t||"year"==t)&&(t="MM - dd\nyyyy");var n=l(i),a=n.getFullYear(),o=n.getMonth()+1,s=n.getDate(),r=n.getHours(),h=n.getMinutes(),d=n.getSeconds();return t=t.replace("MM",e(o)),t=t.toLowerCase(),t=t.replace("yyyy",a),t=t.replace("yy",a%100),t=t.replace("dd",e(s)),t=t.replace("d",s),t=t.replace("hh",e(r)),t=t.replace("h",r),t=t.replace("mm",e(h)),t=t.replace("m",h),t=t.replace("ss",e(d)),t=t.replace("s",d)}function n(t){return t=l(t),t.setDate(t.getDate()+8-t.getDay()),t}function a(t,e,i){return t=l(t),t.setMonth(Math.ceil((t.getMonth()+1)/i)*i),t.setDate(e),t}function o(t,e){return a(t,e,1)}function s(t,e){return a(t,e,3)}function r(t,e){return a(t,e,6)}function h(t,e){return a(t,e,12)}function l(t){return t instanceof Date?t:new Date("string"==typeof t?t.replace(/-/g,"/"):t)}var d=[{formatter:"hh : mm : ss",value:1e3},{formatter:"hh : mm : ss",value:5e3},{formatter:"hh : mm : ss",value:1e4},{formatter:"hh : mm : ss",value:15e3},{formatter:"hh : mm : ss",value:3e4},{formatter:"hh : mm\nMM - dd",value:6e4},{formatter:"hh : mm\nMM - dd",value:3e5},{formatter:"hh : mm\nMM - dd",value:6e5},{formatter:"hh : mm\nMM - dd",value:9e5},{formatter:"hh : mm\nMM - dd",value:18e5},{formatter:"hh : mm\nMM - dd",value:36e5},{formatter:"hh : mm\nMM - dd",value:72e5},{formatter:"hh : mm\nMM - dd",value:216e5},{formatter:"hh : mm\nMM - dd",value:432e5},{formatter:"MM - dd\nyyyy",value:864e5},{formatter:"week",value:6048e5},{formatter:"month",value:26784e5},{formatter:"quarter",value:8208e6},{formatter:"half-year",value:16416e6},{formatter:"year",value:32832e6}];return{getAutoFormatter:t,getNewDate:l,format:i,nextMonday:n,nextNthPerNmonth:a,nextNthOnMonth:o,nextNthOnQuarterYear:s,nextNthOnHalfYear:r,nextNthOnYear:h}}),define("echarts/util/smartSteps",[],function(){function t(t){return w.log(I(t))/w.LN10}function e(t){return w.pow(10,t)}function i(t){return t===W(t)}function n(t,e,n,a){U=a||{},_=U.steps||v,b=U.secs||L,n=S(+n||0)%99,t=+t||0,e=+e||0,x=k=0,"min"in U&&(t=+U.min||0,x=1),"max"in U&&(e=+U.max||0,k=1),t>e&&(e=[t,t=e][0]);var o=e-t;if(x&&k)return f(t,e,n);if((n||5)>o){if(i(t)&&i(e))return c(t,e,n);if(0===o)return u(t,e,n)}return l(t,e,n)}function a(t,i,n,a){a=a||0;var r=o((i-t)/n,-1),h=o(t,-1,1),l=o(i,-1),d=w.min(r.e,h.e,l.e);0===h.c?d=w.min(r.e,l.e):0===l.c&&(d=w.min(r.e,h.e)),s(r,{c:0,e:d}),s(h,r,1),s(l,r),a+=d,t=h.c,i=l.c;for(var p=(i-t)/n,m=e(a),c=0,u=[],g=n+1;g--;)u[g]=(t+p*g)*m;if(0>a){c=y(m),p=+(p*m).toFixed(c),t=+(t*m).toFixed(c),i=+(i*m).toFixed(c);for(var g=u.length;g--;)u[g]=u[g].toFixed(c),0===+u[g]&&(u[g]="0")}else t*=m,i*=m,p*=m;return b=0,_=0,U=0,{min:t,max:i,secs:n,step:p,fix:c,exp:a,pnts:u}}function o(n,a,o){a=S(a%10)||2,0>a&&(i(n)?a=(""+I(n)).replace(/0+$/,"").length||1:(n=n.toFixed(15).replace(/0+$/,""),a=n.replace(".","").replace(/^[-0]+/,"").length,n=+n));var s=W(t(n))-a+1,r=+(n*e(-s)).toFixed(15)||0;return r=o?W(r):X(r),!r&&(s=0),(""+I(r)).length>a&&(s+=1,r/=10),{c:r,e:s}}function s(t,i,n){var a=i.e-t.e;a&&(t.e+=a,t.c*=e(-a),t.c=n?W(t.c):X(t.c))}function r(t,e,i){t.e<e.e?s(e,t,i):s(t,e,i)}function h(t,e){e=e||v,t=o(t);for(var i=t.c,n=0;i>e[n];)n++;if(!e[n])for(i/=10,t.e+=1,n=0;i>e[n];)n++;return t.c=e[n],t}function l(t,e,n){var r,l=n||+b.slice(-1),u=h((e-t)/l,_),y=o(e-t),f=o(t,-1,1),U=o(e,-1);if(s(y,u),s(f,u,1),s(U,u),n?r=p(f,U,l):l=d(f,U),i(t)&&i(e)&&t*e>=0){if(l>e-t)return c(t,e,l);l=m(t,e,n,f,U,l)}var v=g(t,e,f.c,U.c);return f.c=v[0],U.c=v[1],(x||k)&&V(t,e,f,U),a(f.c,U.c,l,U.e)}function d(t,i){for(var n,a,o,s,r=[],l=b.length;l--;)n=b[l],a=h((i.c-t.c)/n,_),a=a.c*e(a.e),o=W(t.c/a)*a,s=X(i.c/a)*a,r[l]={min:o,max:s,step:a,span:s-o};return r.sort(function(t,e){var i=t.span-e.span;return 0===i&&(i=t.step-e.step),i}),r=r[0],n=r.span/r.step,t.c=r.min,i.c=r.max,3>n?2*n:n}function p(t,i,n){for(var a,o,s=i.c,r=(i.c-t.c)/n-1;s>t.c;)r=h(r+1,_),r=r.c*e(r.e),a=r*n,o=X(i.c/r)*r,s=o-a;var l=t.c-s,d=o-i.c,p=l-d;return p>=2*r&&(p=W(p/r)*r,s+=p,o+=p),t.c=s,i.c=o,r}function m(t,n,a,o,s,r){var h=s.c-o.c,l=h/r*e(s.e);if(!i(l)&&(l=W(l),h=l*r,n-t>h&&(l+=1,h=l*r,!a&&l*(r-1)>=n-t&&(r-=1,h=l*r)),h>=n-t)){var d=h-(n-t);o.c=S(t-d/2),s.c=S(n+d/2),o.e=0,s.e=0}return r}function c(t,e,i){if(i=i||5,x)e=t+i;else if(k)t=e-i;else{var n=i-(e-t),o=S(t-n/2),s=S(e+n/2),r=g(t,e,o,s);t=r[0],e=r[1]}return a(t,e,i)}function u(t,e,i){i=i||5;var n=w.min(I(e/i),i)/2.1;return x?e=t+n:k?t=e-n:(t-=n,e+=n),l(t,e,i)}function g(t,e,i,n){return t>=0&&0>i?(n-=i,i=0):0>=e&&n>0&&(i-=n,n=0),[i,n]}function y(t){return t=(+t).toFixed(15).split("."),t.pop().replace(/0+$/,"").length}function V(t,e,i,n){if(x){var a=o(t,4,1);i.e-a.e>6&&(a={c:0,e:i.e}),r(i,a),r(n,a),n.c+=a.c-i.c,i.c=a.c}else if(k){var s=o(e,4);n.e-s.e>6&&(s={c:0,e:n.e}),r(i,s),r(n,s),i.c+=s.c-n.c,n.c=s.c}}function f(t,e,i){var n=i?[i]:b,r=e-t;if(0===r)return e=o(e,3),i=n[0],e.c=S(e.c+i/2),a(e.c-i,e.c,i,e.e);I(e/r)<1e-6&&(e=0),I(t/r)<1e-6&&(t=0);var h,l,d,p=[[5,10],[10,2],[50,10],[100,2]],m=[],c=[],u=o(e-t,3),g=o(t,-1,1),y=o(e,-1);s(g,u,1),s(y,u),r=y.c-g.c,u.c=r;for(var V=n.length;V--;){i=n[V],h=X(r/i),l=h*i-r,d=3*(l+3),d+=2*(i-n[0]+2),i%5===0&&(d-=10);for(var f=p.length;f--;)h%p[f][0]===0&&(d/=p[f][1]);c[V]=[i,h,l,d].join(),m[V]={secs:i,step:h,delta:l,score:d}}return m.sort(function(t,e){return t.score-e.score}),m=m[0],g.c=S(g.c-m.delta/2),y.c=S(y.c+m.delta/2),a(g.c,y.c,m.secs,u.e)}var U,_,b,x,k,v=[10,20,25,50],L=[4,5,6],w=Math,S=w.round,W=w.floor,X=w.ceil,I=w.abs;return n});